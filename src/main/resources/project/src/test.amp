func printstr (i8[]: pointer, i64: length) {
    compiler<asm>(
        "mov rsi, {}" : pointer
        "mov rdx, {}" : length
        "mov rdi, 1"
        "mov rax, 1"
        "syscall"
    );

    ret;
}

func printhex (i64: number) {
    i8[]: hex_data = stack_alloc<i8, 16>("0123456789abcdef");
    i8[]: hex_strs = stack_alloc<i8, 17>("................\n");

    for (i32: i = 15; i >= 0; i = i - 1) {
        hex_strs[i] = hex_data[number & cast<i64>(15)];
        number = number >> cast<i64>(4);
        continue;
    }

    printstr(hex_strs, 17L);
    ret;
}

func printhex (i32: number) {
    printhex(cast<i64>(number));
    ret;
}

func params (i64: a, i32: b, i16: c, i8: d) {
    printhex(a);
    printhex(cast<i64>(b));
    printhex(cast<i64>(c));
    printhex(cast<i64>(d));
    ret;
}

func main () : i32 {
    params(0xfedcba9876543210L, 0xfdb97531, cast<i16>(0xfb73), cast<i8>(0xf7));
    printstr(stack_alloc<i8, 13>("Hello World!\n"), 13L);
    ret 0;
}
